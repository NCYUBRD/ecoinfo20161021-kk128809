#作業

##載入資料

###設定檔案位置
```{r}
setwd('c:\\Users/U250/Desktop/生態資訊/ch_2.1/data/raw/')
```

###載入所有資料
```{r}
library(data.table)

#載入所有檔案
#pattern = 'auto'  設定載入檔案名稱中有auto的檔案
files <- list.files('.' , pattern = 'auto')

#使用list()建立三維空資料集合
cwd <- list()

#length(files)資料長度
#利用for做迴圈將資料載入

for( i in 1:length(files)){
  cwd[[i]] <- fread( files[i], skip = 74)
}

#檢查資料
head(cwd[[3]])
head(cwd[[2]])

#合併資料rbind

allinone_cwd <- for(i in 2:5){
  rbind(cwd[[1]], cwd[[i]], fill = TRUE)
}

help("rbind")





#append()

list(cwd[[1]])



#更換欄位名稱
#setname(檔案名, 1:9, 欄位名)

#as.POSIXct()
#strptime(檔案, '%Y%m%d%H)

changetime_np_raw <- as.POSIXct( strptime(
  [np_raw$yyyymmddhh]   '%Y%m%d%H'))                              '%Y%m%d%H'))

np_raw$yyyymmddhh <- np_raw$yyyymmddhh-1

np_raw[, timestamp:=as.POSIXct(strptime(yyyymmddhh, '%Y%m%d%H'))]


#aggregate

aggregate(. ~ stno, data = np_raw, FUN = mean)

list(np_raw)


sk_er(name)
<- function(
  c1 <- c (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
  c1 <- c ('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j')
  c2 <- c ('stno', 'yyyymmddhh', 'PS01', 'TX01', 'RH01',
           'WD01', 'WD02', 'PP01', 'SS01', 'timestamp')
  setnames(np_raw, 1:10, c1)
  for(np_raw$a in a:j){np_raw$a <= -9999 <-na}
    
    
    
)